{% load mb_extras %}
<div>
    <!--post title, upvote icon and url-->
    <div>
        <!--only show upvote functionalities if the user is authenticated.-->
        {% if request.user.is_authenticated %}
            {% csrf_token %}
            <a id="up_{{ post.id }}"
               onclick="upvotePost(this)"
               data-upvote-url="{% url 'mb:post_upvote' post.id %}"
               data-redirect-url="{% url 'login' %}"
               class="cursor-pointer">
                <!--if user does not like post this will be displayed (grayed out)-->
                <span class="{% if post.is_fan %}hidden{% endif %} grayscale opacity-30"
                      data-state="inactive">ðŸ”¥</span>
                <!--else this-->
                <span class="{% if not post.is_fan %}hidden{% endif %} grayscale-0 opacity-100"
                      data-state="active">ðŸ”¥</span>
            </a>
        {% endif %}
        <a href="{{ post.url }}">
        {{ post.title }}</a>
        <span class="text-base-600 text-xs">({{ post.url|truncatesmart }})</span>
    </div>
    <!--post metadata and buttons-->
    <div class="text-base-600 mb-1 text-xs">
        <a href="{% url 'mb:profile' post.user.id %}"
           class="italic hover:text-base-100 cursor-pointer">{{ post.user }}</a>
        {{ post.date|timeago }} ago
        {%  if post.board_prefix %} in
            <span class="{{  post.board_prefix | board_color }}">
                {{ post.board_prefix }}
            </span>
        {% endif %}
        (<span class="score" id="score_{{ post.id }}">{{ post.nlikes }} point{{ post.nlikes|pluralize }}</span>)
        <a href="{% url 'mb:post_detail' post.id %}" class="hover:text-base-100 cursor-pointer whitespace-nowrap">{{ post.comment_count }} comments</a>
        {% if post.user == request.user or request.user.has_mod_rights %}
            | <a href="{% url 'mb:post_delete' post.id %}"
    class="hover:text-base-100 cursor-pointer">delete</a>
            | <a href="{% url 'mb:post_edit' post.id %}"
    class="hover:text-base-100 cursor-pointer">edit</a>
        {% endif %}
    </div>
</div>
